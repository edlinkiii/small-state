"use strict";function _classPrivateFieldInitSpec(e,t,i){_checkPrivateRedeclaration(e,t),t.set(e,i)}function _checkPrivateRedeclaration(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldGet(e,t){var i=_classExtractFieldDescriptor(e,t,"get");return _classApplyDescriptorGet(e,i)}function _classStaticPrivateFieldSpecSet(e,t,i,s){return _classCheckPrivateStaticAccess(e,t),_classCheckPrivateStaticFieldDescriptor(i,"set"),_classApplyDescriptorSet(e,i,s),s}function _classPrivateFieldSet(e,t,i){var s=_classExtractFieldDescriptor(e,t,"set");return _classApplyDescriptorSet(e,s,i),i}function _classExtractFieldDescriptor(e,t,i){if(!t.has(e))throw TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function _classApplyDescriptorSet(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=i}}function _classStaticPrivateFieldSpecGet(e,t,i){return _classCheckPrivateStaticAccess(e,t),_classCheckPrivateStaticFieldDescriptor(i,"get"),_classApplyDescriptorGet(e,i)}function _classCheckPrivateStaticFieldDescriptor(e,t){if(void 0===e)throw TypeError("attempted to "+t+" private static field before its declaration")}function _classCheckPrivateStaticAccess(e,t){if(e!==t)throw TypeError("Private static access of wrong provenance")}function _classApplyDescriptorGet(e,t){return t.get?t.get.call(e):t.value}Object.defineProperty(exports,"__esModule",{value:!0}),exports.SmallState=void 0;var _state=new WeakMap,_initial=new WeakMap,_locked=new WeakMap,_subscriptions=new WeakMap;class SmallState{constructor(){if(_classPrivateFieldInitSpec(this,_state,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_initial,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_locked,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_subscriptions,{writable:!0,value:void 0}),_classStaticPrivateFieldSpecGet(SmallState,SmallState,_instance))return _classStaticPrivateFieldSpecGet(SmallState,SmallState,_instance);_classPrivateFieldSet(this,_state,{}),_classPrivateFieldSet(this,_initial,{}),_classPrivateFieldSet(this,_locked,[]),_classPrivateFieldSet(this,_subscriptions,{}),_classStaticPrivateFieldSpecSet(SmallState,SmallState,_instance,this)}add(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _classPrivateFieldGet(this,_state).hasOwnProperty(e)?(console.error("Specified state property already exists."),!1):(_classPrivateFieldGet(this,_initial)[e]=t,_classPrivateFieldGet(this,_state)[e]=void 0,_classPrivateFieldGet(this,_subscriptions)[e]=[],this.reset(e),i&&_classPrivateFieldGet(this,_locked).push(e),this)}get(e){return _classPrivateFieldGet(this,_state).hasOwnProperty(e)?_classPrivateFieldGet(this,_state)[e]:(console.error("Specified state property does not exist."),!1)}set(e,t){return _classPrivateFieldGet(this,_state).hasOwnProperty(e)?_classPrivateFieldGet(this,_locked).includes(e)?(console.error("Specified state property is not alterable."),!1):(_classPrivateFieldGet(this,_state)[e]=t,this.emit(e),t):(console.error("Specified state property does not exist."),!1)}reset(e){return _classPrivateFieldGet(this,_state).hasOwnProperty(e)?_classPrivateFieldGet(this,_locked).includes(e)?(console.error("Specified state property is not alterable."),!1):this.set(e,_classPrivateFieldGet(this,_initial)[e]):(console.error("Specified state property does not exist."),!1)}remove(e){return _classPrivateFieldGet(this,_state).hasOwnProperty(e)?_classPrivateFieldGet(this,_locked).includes(e)?(console.error("Specified state property is not alterable."),!1):(delete _classPrivateFieldGet(this,_state)[e],delete _classPrivateFieldGet(this,_initial)[e],delete _classPrivateFieldGet(this,_subscriptions)[e],_classPrivateFieldSet(this,_locked,_classPrivateFieldGet(this,_locked).filter(t=>t!==e)),this):(console.error("Specified state property does not exist."),!1)}subscribe(e,t){if("string"==typeof e&&!_classPrivateFieldGet(this,_state).hasOwnProperty(e)){console.error("Specified state property does not exist.");return}Array.isArray(e)?e.forEach(e=>this.subscribe(e,t)):_classPrivateFieldGet(this,_subscriptions)[e].push(t)}unsubscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Array.isArray(e)?e.forEach(e=>this.unsubscribe(e,t)):_classPrivateFieldGet(this,_subscriptions)[e]=null===t?[]:_classPrivateFieldGet(this,_subscriptions)[e].filter(e=>e!==t)}emit(e){_classPrivateFieldGet(this,_subscriptions)[e].forEach(t=>t(this.get(e)))}}exports.SmallState=SmallState;var _instance={writable:!0,value:void 0};