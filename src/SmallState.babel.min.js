"use strict";function _newArrowCheck(s,e){if(s!==e)throw TypeError("Cannot instantiate an arrow function")}function _classPrivateFieldLooseBase(s,e){if(!Object.prototype.hasOwnProperty.call(s,e))throw TypeError("attempted to use private field on non-instance");return s}var id=0;function _classPrivateFieldLooseKey(s){return"__private_"+id+++"_"+s}var _instance=_classPrivateFieldLooseKey("instance"),_state=_classPrivateFieldLooseKey("state"),_initial=_classPrivateFieldLooseKey("initial"),_locked=_classPrivateFieldLooseKey("locked"),_subscriptions=_classPrivateFieldLooseKey("subscriptions"),_propertyExists=_classPrivateFieldLooseKey("propertyExists"),_propertyIsLocked=_classPrivateFieldLooseKey("propertyIsLocked"),SmallState=function(){function s(){var e=this;if(Object.defineProperty(this,_state,{writable:!0,value:{}}),Object.defineProperty(this,_initial,{writable:!0,value:{}}),Object.defineProperty(this,_locked,{writable:!0,value:[]}),Object.defineProperty(this,_subscriptions,{writable:!0,value:{}}),Object.defineProperty(this,_propertyExists,{writable:!0,value:(function s(t){return _newArrowCheck(this,e),_classPrivateFieldLooseBase(this,_state)[_state].hasOwnProperty(t)}).bind(this)}),Object.defineProperty(this,_propertyIsLocked,{writable:!0,value:(function s(t){return _newArrowCheck(this,e),_classPrivateFieldLooseBase(this,_locked)[_locked].includes(t)}).bind(this)}),_classPrivateFieldLooseBase(s,_instance)[_instance])return _classPrivateFieldLooseBase(s,_instance)[_instance];this.ERROR_PROPERTY_ALREADY_EXISTS="Specified state property already exists.",this.ERROR_PROPERTY_DOES_NOT_EXIST="Specified state property does not exist.",this.ERROR_PROPERTY_IS_LOCKED="Specified state property is not alterable.",this.TYPE_STRING="string",_classPrivateFieldLooseBase(s,_instance)[_instance]=this}var e=s.prototype;return e.add=function s(e,t,i){if(void 0===t&&(t=null),void 0===i&&(i=!1),_classPrivateFieldLooseBase(this,_propertyExists)[_propertyExists](e))throw Error(this.ERROR_PROPERTY_ALREADY_EXISTS);return _classPrivateFieldLooseBase(this,_initial)[_initial][e]=t,_classPrivateFieldLooseBase(this,_state)[_state][e]=void 0,_classPrivateFieldLooseBase(this,_subscriptions)[_subscriptions][e]=[],this.reset(e),i&&_classPrivateFieldLooseBase(this,_locked)[_locked].push(e),this},e.get=function s(e){if(!_classPrivateFieldLooseBase(this,_propertyExists)[_propertyExists](e))throw Error(this.ERROR_PROPERTY_DOES_NOT_EXIST);return _classPrivateFieldLooseBase(this,_state)[_state][e]},e.set=function s(e,t){if(!_classPrivateFieldLooseBase(this,_propertyExists)[_propertyExists](e))throw Error(this.ERROR_PROPERTY_DOES_NOT_EXIST);if(_classPrivateFieldLooseBase(this,_propertyIsLocked)[_propertyIsLocked](e))throw Error(this.ERROR_PROPERTY_IS_LOCKED);return _classPrivateFieldLooseBase(this,_state)[_state][e]=t,this.emit(e),t},e.reset=function s(e){if(!_classPrivateFieldLooseBase(this,_propertyExists)[_propertyExists](e))throw Error(this.ERROR_PROPERTY_DOES_NOT_EXIST);if(_classPrivateFieldLooseBase(this,_propertyIsLocked)[_propertyIsLocked](e))throw Error(this.ERROR_PROPERTY_IS_LOCKED);return this.set(e,_classPrivateFieldLooseBase(this,_initial)[_initial][e])},e.remove=function s(e){if(!_classPrivateFieldLooseBase(this,_propertyExists)[_propertyExists](e))throw Error(this.ERROR_PROPERTY_DOES_NOT_EXIST);if(_classPrivateFieldLooseBase(this,_propertyIsLocked)[_propertyIsLocked](e))throw Error(this.ERROR_PROPERTY_IS_LOCKED);return delete _classPrivateFieldLooseBase(this,_state)[_state][e],delete _classPrivateFieldLooseBase(this,_initial)[_initial][e],delete _classPrivateFieldLooseBase(this,_subscriptions)[_subscriptions][e],this},e.subscribe=function s(e,t){var i=this;if(typeof e===this.TYPE_STRING&&!_classPrivateFieldLooseBase(this,_propertyExists)[_propertyExists](e))throw Error(this.ERROR_PROPERTY_DOES_NOT_EXIST);var r=_classPrivateFieldLooseBase(this,_subscriptions)[_subscriptions][e];Array.isArray(e)?e.forEach((function(s){return _newArrowCheck(this,i),this.subscribe(s,t)}).bind(this)):r.push(t)},e.unsubscribe=function s(e,t){var i=this;void 0===t&&(t=null);var r=_classPrivateFieldLooseBase(this,_subscriptions)[_subscriptions][e];Array.isArray(e)?e.forEach((function(s){return _newArrowCheck(this,i),this.unsubscribe(s,t)}).bind(this)):r=null===t?[]:r.filter((function(s){return _newArrowCheck(this,i),s!==t}).bind(this))},e.emit=function s(e){var t=this,i=_classPrivateFieldLooseBase(this,_subscriptions)[_subscriptions][e];if(null!=i&&i.length){var r=this.get(e);i.forEach((function(s){return _newArrowCheck(this,t),s(r)}).bind(this))}},s}();Object.defineProperty(SmallState,_instance,{writable:!0,value:void 0});