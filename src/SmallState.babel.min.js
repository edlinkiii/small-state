function _typeof(o){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _toConsumableArray(r){return _arrayWithoutHoles(r)||_iterableToArray(r)||_unsupportedIterableToArray(r)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r){return _arrayLikeToArray(r,a)}var t={}.toString.call(r).slice(8,-1);return "Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"]){return Array.from(r)}}function _arrayWithoutHoles(r){if(Array.isArray(r)){return _arrayLikeToArray(r)}}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e+=1){n[e]=r[e]}return n}function _newArrowCheck(n,r){if(n!==r){throw new TypeError("Cannot instantiate an arrow function")}}function _classCallCheck(a,n){if(!(a instanceof n)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(e,r){for(var t=0;t<r.length;t+=1){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(t){var i=_toPrimitive(t,"string");return "symbol"==_typeof(i)?i:i+""}function _toPrimitive(t,r){if("object"!=_typeof(t)||!t){return t}var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i)){return i}throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}function _classPrivateFieldInitSpec(e,t,a){_checkPrivateRedeclaration(e,t),t.set(e,a)}function _checkPrivateRedeclaration(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function _classPrivateFieldSet(s,a,r){return s.set(_assertClassBrand(s,a),r),r}function _classPrivateFieldGet(s,a){return s.get(_assertClassBrand(s,a))}function _assertClassBrand(e,t,n){if("function"==typeof e?e===t:e.has(t)){return arguments.length<3?t:n}throw new TypeError("Private element is not present on this object")}var _state=new WeakMap();var _initial=new WeakMap();var _locked=new WeakMap();var _subscriptions=new WeakMap();var _check=new WeakMap();var _error=new WeakMap();var SmallState=function(){"use strict";function SmallState(){var _this=this;_classCallCheck(this,SmallState);_classPrivateFieldInitSpec(this,_state,{});_classPrivateFieldInitSpec(this,_initial,{});_classPrivateFieldInitSpec(this,_locked,[]);_classPrivateFieldInitSpec(this,_subscriptions,{});_classPrivateFieldInitSpec(this,_check,{typeOf:function typeOf(x){_newArrowCheck(this,_this);if(x===undefined){return "undefined"}if(x===null){return "null"}return x.constructor.name.toLowerCase()}.bind(this),isString:function isString(str){_newArrowCheck(this,_this);return _classPrivateFieldGet(_check,this).typeOf(str)==="string"}.bind(this),isArray:function isArray(arr){_newArrowCheck(this,_this);return _classPrivateFieldGet(_check,this).typeOf(arr)==="array"}.bind(this),isFunction:function isFunction(func){_newArrowCheck(this,_this);return _classPrivateFieldGet(_check,this).typeOf(func)==="function"}.bind(this),propertyExists:function propertyExists(property){_newArrowCheck(this,_this);return Object.hasOwn(_classPrivateFieldGet(_state,this),property)}.bind(this),propertyIsLocked:function propertyIsLocked(property){_newArrowCheck(this,_this);return _classPrivateFieldGet(_locked,this).includes(property)}.bind(this)});_classPrivateFieldInitSpec(this,_error,{propertyAlredyExists:function propertyAlredyExists(property){_newArrowCheck(this,_this);return "Specified state property [".concat(property,"] already exists.")}.bind(this),propertyDoesNotExist:function propertyDoesNotExist(property){_newArrowCheck(this,_this);return "Specified state property [".concat(property,"] does not exist.")}.bind(this),propertyIsLocked:function propertyIsLocked(property){_newArrowCheck(this,_this);return "Specified state property [".concat(property,"] is not alterable.")}.bind(this),functionIsRequired:function functionIsRequired(property){_newArrowCheck(this,_this);return "A function is required to add a subscriber for property (".concat(property,")")}.bind(this)});if(_instance._){return _instance._}_instance._=this}return _createClass(SmallState,[{key:"error",value:function error(errorMessage){console.error("SmallStateError: ".concat(errorMessage))}},{key:"add",value:function add(property){var value=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var lock=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(_classPrivateFieldGet(_check,this).propertyExists(property)){this.error(_classPrivateFieldGet(_error,this).propertyAlredyExists(property));return null}_classPrivateFieldGet(_initial,this)[property]=value;_classPrivateFieldGet(_state,this)[property]=undefined;_classPrivateFieldGet(_subscriptions,this)[property]=[];this.reset(property);if(lock){this.lock(property)}return this}},{key:"has",value:function has(property){var hasProperty=_classPrivateFieldGet(_check,this).propertyExists(property);return hasProperty}},{key:"get",value:function get(property){if(!_classPrivateFieldGet(_check,this).propertyExists(property)){throw new Error(_classPrivateFieldGet(_error,this).propertyDoesNotExist(property))}return _classPrivateFieldGet(_state,this)[property]}},{key:"set",value:function set(property,value){if(!_classPrivateFieldGet(_check,this).propertyExists(property)){this.error(_classPrivateFieldGet(_error,this).propertyDoesNotExist(property));return null}if(_classPrivateFieldGet(_check,this).propertyIsLocked(property)){this.error(_classPrivateFieldGet(_error,this).propertyIsLocked(property));return null}_classPrivateFieldGet(_state,this)[property]=value;this.emit(property);return this}},{key:"reset",value:function reset(property){if(!_classPrivateFieldGet(_check,this).propertyExists(property)){this.error(_classPrivateFieldGet(_error,this).propertyDoesNotExist(property));return null}if(_classPrivateFieldGet(_check,this).propertyIsLocked(property)){this.error(_classPrivateFieldGet(_error,this).propertyIsLocked(property));return null}return this.set(property,_classPrivateFieldGet(_initial,this)[property])}},{key:"remove",value:function remove(property){if(!_classPrivateFieldGet(_check,this).propertyExists(property)){this.error(_classPrivateFieldGet(_error,this).propertyDoesNotExist(property));return null}if(_classPrivateFieldGet(_check,this).propertyIsLocked(property)){this.error(_classPrivateFieldGet(_error,this).propertyIsLocked(property));return null}delete _classPrivateFieldGet(_state,this)[property];delete _classPrivateFieldGet(_initial,this)[property];delete _classPrivateFieldGet(_subscriptions,this)[property];return this}},{key:"lock",value:function lock(property){_classPrivateFieldSet(_locked,this,_toConsumableArray(new Set([].concat(_toConsumableArray(_classPrivateFieldGet(_locked,this)),[property]))));return this}},{key:"unlock",value:function unlock(property){var _this2=this;_classPrivateFieldSet(_locked,this,_classPrivateFieldGet(_locked,this).filter(function(locked){_newArrowCheck(this,_this2);return locked!==property}.bind(this)));return this}},{key:"subscribe",value:function subscribe(property,callback){var _this3=this;if(!_classPrivateFieldGet(_check,this).isFunction(callback)){this.error(_classPrivateFieldGet(_error,this).functionIsRequired(property));return}if(_classPrivateFieldGet(_check,this).isArray(property)){property.forEach(function(prop){_newArrowCheck(this,_this3);return this.subscribe(prop,callback)}.bind(this));return}if(_classPrivateFieldGet(_check,this).isString(property)){if(!_classPrivateFieldGet(_check,this).propertyExists(property)){this.error(_classPrivateFieldGet(_error,this).propertyDoesNotExist(property));return}_classPrivateFieldGet(_subscriptions,this)[property].push(callback)}}},{key:"unsubscribe",value:function unsubscribe(property){var _this4=this;var callback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(_classPrivateFieldGet(_check,this).isArray(property)){property.forEach(function(prop){_newArrowCheck(this,_this4);return this.unsubscribe(prop,callback)}.bind(this));return}else if(_classPrivateFieldGet(_check,this).isString(property)){if(!_classPrivateFieldGet(_check,this).propertyExists(property)){this.error(_classPrivateFieldGet(_error,this).propertyDoesNotExist(property));return}if(callback===null){_classPrivateFieldGet(_subscriptions,this)[property]=null}else if(!_classPrivateFieldGet(_check,this).isFunction(callback)){var filterFunction=function filterFunction(cb){_newArrowCheck(this,_this4);return cb!==callback}.bind(this);_classPrivateFieldGet(_subscriptions,this)[property].filter(filterFunction)}}}},{key:"emit",value:function emit(property){var _this5=this;var subscriptions=_classPrivateFieldGet(_subscriptions,this)[property];if(!(subscriptions!==null&&subscriptions!==void 0&&subscriptions.length)){return}var value=this.get(property);subscriptions.forEach(function(callback){_newArrowCheck(this,_this5);return callback(value)}.bind(this))}}])}();var _instance={_:void 0};